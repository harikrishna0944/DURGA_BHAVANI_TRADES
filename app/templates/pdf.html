<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DURGA BHAVANI TRADERS</title>
    <style>
        h1 {text-align: center;}
        div {text-align: center;}
        table, th, td {
                border: 1px solid black;
                margin-left: auto;
                margin-right: auto;
                margin-top: 50px;
                height: 50px;
                vertical-align: center;
        }
        </style>
</head>
{% load static %}
<link rel="stylesheet" href="{% static "style1.css" %}">
<body>
    <div class="container">
        <h1 text>DURGA BHAVANI TRADERS</h1>
        <table id="customers" border="1">
            <thead>
                <th>SNO</th>
                <th>LOT Name</th>
                <th>Bags</th>
                <th>Total Kgs</th>
                <th>Rate Per Kg</th>
                <th>Amount Rs</th>
            </thead>
           {% for i in biller %}
            <tr>
                <td >{{i.id}}</td>
                <td>{{i.LOT_Name}}</td>
                <td>{{i.Bags}}</td>
                <td>{{i.Total_Kgs}}</td>
                <td>{{i.Rate_Per_Kg}}</td>
                <td>{{i.Amount_Rs}}</td>

            </tr>
          {% endfor%}
        <tfoot>
            {% for i in totc %}
            <tr>
                <th colspan="4">Total Bags</th>
                <td id="totalBags" colspan="2">{{i.totalBags}}</td>
            </tr>
            <tr>
                <th colspan="4">Total Bags</th>
                <td id="totalkgs" colspan="2">{{i.totalkgs}}</td>
            </tr>
            <tr>
                <th colspan="4">Total Amount</th>
                <td id="totalAmount" colspan="2">{{i.totalAmount}}</td>
            </tr>
            {% endfor%}
        </tfoot> 
        </table>
        <table id="Deductions" border="1">
            
            <thead>
                <th>Cooli & Rent:</th>
                <th>L/F Amount:</th>
                <th>Commission(%5):</th>
                <th>Brokerage:</th>
            </thead>
            {% for i in dedc %}
            <tr>
                <td>{{i.Cooli_Rent}}</td>
                <td>{{i.LF_Amount}}</td>
                <td>{{i.Commission}}</td>
                <td>{{i.Brokerage}}</td>
            </tr>
            {% endfor%}
            <tfoot>
                {% for i in totc %}
                <tr>
                    <th colspan="2">Deduction</th>
                    <td id="Deduction" colspan="2">{{i.Deduction}}</td>
                </tr>
                <tr>
                    <th colspan="2">Total Net Amount</th>
                    <td id="totalnetAmount" colspan="2">{{i.totalnetAmount}}</td>
                </tr>
                {% endfor%}
            </tfoot> 
            
           <!-- <script>
                function calculateTotals() {
                    let table = document.getElementById("customers");
                    let rows = table.getElementsByTagName("tbody")[0].getElementsByTagName("tr");
                    let totalBags = 0;
                    let totalkgs = 0;
                    let totalAmount = 0;
        
                    for (let i = 0; i < rows.length; i++) {
                        let cells = rows[i].getElementsByTagName("td");
                        totalBags += parseInt(cells[2].innerText) || 0;
                        totalkgs += parseInt(cells[4].innerText) || 0;
                        totalAmount += parseFloat(cells[5].innerText) || 0;
                    }
        
                    document.getElementById("totalBags").innerText = totalBags;
                    document.getElementById("totalkgs").innerText = totalkgs;
                    document.getElementById("totalAmount").innerText = totalAmount;
                    return totalAmount;
                }
        
                function calculateTotals1(totalAmount) {
                    let table = document.getElementById("Deductions");
                    let rows = table.getElementsByTagName("tbody")[0].getElementsByTagName("tr");
                    let Deduction = 0;
        
                    for (let i = 0; i < rows.length; i++) {
                        let cells = rows[i].getElementsByTagName("td");
                        for (let j = 0; j < cells.length; j++) {
                            let value = parseFloat(cells[j].innerText) || 0;
                            Deduction += value;
                        }
                    }
        
                    let totalnetAmount = totalAmount - Deduction;
                    document.getElementById("Deduction").innerText = Deduction;
                    document.getElementById("totalnetAmount").innerText = totalnetAmount;
                }
        
                // Calculate the totals on page load
                window.onload = function() {
                    let totalAmount = calculateTotals();
                    calculateTotals1(totalAmount);
                };
                
            </script>
            -->
        
        </table>
        

        <br><br>
    </div>
    <h5>This is System Generated Invoice</h5>
</body>

</html>